.container-fluid
  //- .row
  //-   .col-lg-12
  //-     h3.page-header
  //-       | Logging service
  .row
    .col-lg-10.col-lg-offset-1
      pre.pre-scrollable
        p.logs(ng-repeat='log in $ctrl.logs | orderBy: "created_at" : true')
          | pid:
          span#value
            | {{log.process_instance_id}}
          |, batch_id:
          span#value
            | {{log.batch_id}}
          |, case_id:
          span#value
            | {{log.case_id}}
          |, step_id:
          span#value
            | {{log.step_id}}
          |, description:
          span#value
            | {{log.description}}
  .row
    .col-lg-12
      //- h3.page-header Batchs&nbsp;&nbsp;
      button.btn.btn-primary(ng-click='$ctrl.openModal()')
        i.fa.fa-file-o(aria-hidden="true")  
  .row.row-bordered
    .col-lg-4
      h5
        | Batch ID
    .col-lg-4
      h5
        | Client ID
    .col-lg-4
      h5
        | Environment ID
  .row.row-bordered.bg-info(ng-repeat='batch in $ctrl.batchs | orderBy: "created_at" : true')
    .col-lg-4
      | {{batch.batchid}}
    .col-lg-4
      | {{batch.clientid}}
    .col-lg-4
      | {{batch.environmentid}}
    .row
      .col-lg-11.col-lg-offset-1
        h5
          | Cases
        .row.bg-warning.row-bordered
          .col-lg-3
            h5
              | Case ID
          .col-lg-2
            h5
              | Score
          .col-lg-2
            h5
              | Funding source
          .col-lg-2
            h5
              | Benefit amount
          .col-lg-2
            h5
              | Status
          .col-lg-1
        .row.row-bordered.bg-warning(ng-repeat="iso in $ctrl.isos | filter: { batchid: batch.batchid }")
          .col-lg-3
            | {{iso.caseid}}
          .col-lg-2
            | {{iso.score}}
          .col-lg-2
            | {{iso.fundingsource}}
          .col-lg-2
            | {{iso.benefitamount}}
          .col-lg-2
            | {{iso.casestate}} - {{iso.isostate}}
          .col-lg-1
            i.fa.fa-eye.fa-lg(aria-hidden="true",ng-click='$ctrl.openIsoModal(iso)')
          .row(ng-if="$ctrl.hasResponses(iso)")
            .col-lg-11.col-lg-offset-1
              h5
                | ISO Responses
              .row.bg-danger.row-bordered
                .col-lg-3
                  h5
                    | pid
                .col-lg-2
                  h5
                    | received
                .col-lg-2
                  h5
                    | Score
                .col-lg-2
              .row.bg-danger.row-bordered(ng-repeat="isoresponse in $ctrl.isoresponses | filter: { caseid: iso.caseid }")
                .col-lg-3
                  | {{isoresponse.pid}}
                .col-lg-2
                  | {{isoresponse.createdat}}
                .col-lg-2
                  | {{isoresponse.score}}
                .col-lg-2
                  i.fa.fa-external-link.fa-lg(aria-hidden="true", ng-click='$ctrl.sendIsoScoreModal(isoresponse)')              
          .row(ng-if="$ctrl.hasActivities(iso)")
            .col-lg-11.col-lg-offset-1
              h5
                | Activities
              .row.bg-danger.row-bordered
                .col-lg-3
                  h5
                    | _id
                .col-lg-2
                  h5
                    | Activity ype
                .col-lg-2
              .row.bg-danger.row-bordered(ng-repeat='activity in $ctrl.activities | filter: { case_id: iso.caseid } | orderBy: "created_at" : true')
                .col-lg-3
                  | {{activity._id}}
                .col-lg-2
                  | {{activity.activity_type}}
          .row(ng-if="$ctrl.hasDiaries(iso)")
            .col-lg-11.col-lg-offset-1
              h5
                | Diaries
              .row.bg-danger.row-bordered
                .col-lg-3
                  h5
                    | _id
                .col-lg-2
                  h5
                    | Diary Type
                .col-lg-2
                  h5
                    | Diary Status
                .col-lg-2
              .row.bg-danger.row-bordered(ng-repeat='diary in $ctrl.diaries | filter: { case_id: iso.caseid } | orderBy: "created_at" : true')
                .col-lg-3
                  | {{diary._id}}
                .col-lg-2
                  | {{diary.diary_type}}
                .col-lg-2
                  | {{diary.diary_status}}
  //- .row
  //-   .col-lg-8
  //-     h1.page-header Batchs
  //-       button.btn.btn-primary.pull-right(ng-click='$ctrl.openModal()')
  //-         i.fa.fa-file-o(aria-hidden="true")
  //-     .panel.panel-default(ng-repeat='batch in $ctrl.batchs | orderBy: "created_at" : true')
  //-       .panel-heading
  //-         .h4
  //-           | BatchID: {{batch.batchid}}, Client: {{batch.clientid}}, EnvId: {{ batch.environmentid}}
  //-       .panel-body
  //-         .row
  //-           .col-sm-2
  //-             h5
  //-               | caseid
  //-           .col-sm-2
  //-             h5
  //-               | score
  //-           .col-sm-2
  //-             h5
  //-               | fundingSource
  //-           .col-sm-2
  //-             h5
  //-               | benefitamount
  //-           .col-sm-2
  //-             h5
  //-               | status
  //-         .row(ng-repeat="iso in $ctrl.isos | filter: { batchid: batch.batchid }")
  //-           .col-sm-12
  //-             .row
  //-               .col-sm-2
  //-                 .entry
  //-                   | {{iso.caseid}}
  //-               .col-sm-2
  //-                 .entry
  //-                   | {{iso.score}}
  //-               .col-sm-2
  //-                 .entry
  //-                   | {{iso.fundingsource}}
  //-               .col-sm-2
  //-                 .entry
  //-                   | {{iso.benefitamount}}
  //-               .col-sm-2
  //-                 .entry
  //-                   | {{iso.casestate}} - {{iso.isostate}}
  //-               .col-sm-1
  //-                 i.fa.fa-eye.fa-lg(aria-hidden="true",ng-click='$ctrl.openIsoModal(iso)')
  //-               .col-sm-1
  //-                 i.fa.fa-reply-all.fa-lg(aria-hidden="true",ng-click='$ctrl.sendIsoResponse(iso)')
  //-             .row(ng-if="$ctrl.hasResponses(iso)")
  //-               .col-sm-8.col-sm-offset-2.bg-warning
  //-                 table.table.table-stripped.table-hover.table-condensed
  //-                   thead
  //-                     tr
  //-                       th
  //-                         span.responseEntryTitle
  //-                             | pid
  //-                       th
  //-                         span.responseEntryTitle
  //-                             | received
  //-                       th
  //-                         span.responseEntryTitle
  //-                             | score
  //-                       th
  //-                       th
  //-                   tbody
  //-                     tr(ng-repeat="isoresponse in $ctrl.isoresponses | filter: { caseid: iso.caseid }")
  //-                       td
  //-                         span.responseEntry
  //-                           | {{isoresponse.pid}}
  //-                       td
  //-                         span.responseEntry
  //-                           | {{isoresponse.createdat}}
  //-                       td
  //-                         span.responseEntry
  //-                           | {{isoresponse.score}}
  //-                       td
  //-                         i.fa.fa-eye.fa-lg(aria-hidden="true",ng-click='$ctrl.openIsoModal(isoresponse)')
  //-                       td
  //-                         i.fa.fa-external-link.fa-lg(aria-hidden="true", ng-click='$ctrl.sendIsoScoreModal(isoresponse)')
  //-   .col-lg-4
  //-     .row
  //-       h1.page-header Logs:
  //-       pre.pre-scrollable
  //-         p.logs(ng-repeat='log in $ctrl.logs | orderBy: "created_at" : true')
  //-           | pid:
  //-           span#value
  //-             | {{log.process_instance_id}}
  //-           |, batch_id:
  //-           span#value
  //-             | {{log.batch_id}}
  //-           |, case_id:
  //-           span#value
  //-             | {{log.case_id}}
  //-           |, step_id:
  //-           span#value
  //-             | {{log.step_id}}
  //-           |, description:
  //-           span#value
  //-             | {{log.description}}
  //-       h1.page-header Activities:
  //-       pre.pre-scrollable
  //-         p.logs(ng-repeat='activity in $ctrl.activities | orderBy: "created_at" : true')
  //-           | client_id:
  //-           span#value
  //-             | {{activity.client_id}}
  //-           | , case_id:
  //-           span#value
  //-             | {{activity.case_id}}
  //-           | , created_by:
  //-           span#value
  //-             | {{activity.created_by}}
  //-           | , activity_type:
  //-           span#value
  //-             | {{activity.activity_type}}
  //-           | , description:
  //-           span#value
  //-             | {{activity.description}}
  //-       h1.page-header Diaries:
  //-       pre.pre-scrollable
  //-         p.logs(ng-repeat='diary in $ctrl.diaries | orderBy: "created_at" : true')
  //-           | client_id:
  //-           span#value
  //-             | {{diary.client_id}}
  //-           | , case_id:
  //-           span#value
  //-             | {{diary.case_id}}
  //-           | , created_by:
  //-           span#value
  //-             | {{diary.created_by}}
  //-           | , diary_type:
  //-           span#value
  //-             | {{diary.diary_type}}
  //-           | , diary_status:
  //-           span#value
  //-             | {{diary.diary_status}}
  //-           | , due_date:
  //-           span#value
  //-             | {{diary.due_date}}
  //-           | , description:
  //-           span#value
  //-             | {{diary.description}}
script(type='text/ng-template',id='batchModalContent.html')
  .modal-header
    h3
      | Create new batch
  .modal-body
    form.form-inline
      .form-group
        input.form-control.form-space(type="text",placeHolder="ISOIndicator",ng-model="newCase.isoIndicator")
      .form-group
        input.form-control.form-space(type="text",placeHolder="Score",ng-model="newCase.score")
      .form-group
        input.form-control.form-space(type="text",placeHolder="FundingSource",ng-model="newCase.FundingSource")
      button.btn.btn-primary.pull-right(ng-click="addCase()")
        i.fa.fa-plus-square(aria-hidden="true")
        | &nbsp; Add
      button.btn.btn-warning.form-space.pull-right(ng-click="randomCase()")
        i.fa.fa-random(aria-hidden="true")
        | &nbsp; Random
    pre.pre-scrollable(ng-bind-html="doc | prettify")
  .modal-footer
    button.btn.btn-primary(type="button",ng-click="ok()")
      i.fa.fa-paper-plane-o(aria-hidden="true")
      | &nbsp;Submit
    button.btn.btn-danger(type="button",ng-click="cancel()")
      i.fa.fa-undo(aria-hidden="true")
      | &nbsp;Cancel

script(type='text/ng-template',id='isoModalContent.html')
  .modal-header
    h3
      | View object
  .modal-body
    pre.pre-scrollable(ng-bind-html="doc | prettify")
  .modal-footer
    button.btn.btn-primary(type="button",ng-click="ok()")
      i.fa.fa-paper-plane-o(aria-hidden="true")
      | &nbsp;Send ISO Response
    button.btn.btn-danger(type="button",ng-click="cancel()")
      i.fa.fa-undo(aria-hidden="true")
      | &nbsp;Cancel

script(type='text/ng-template',id='batchModalContent.html')
  .modal-header
    h3
      | Create new batch
  .modal-body
    form.form-inline
      .form-group
        input.form-control.form-space(type="text",placeHolder="ISOIndicator",ng-model="newCase.isoIndicator")
      .form-group
        input.form-control.form-space(type="text",placeHolder="Score",ng-model="newCase.score")
      .form-group
        input.form-control.form-space(type="text",placeHolder="FundingSource",ng-model="newCase.FundingSource")
      button.btn.btn-primary.pull-right(ng-click="addCase()")
        i.fa.fa-plus-square(aria-hidden="true")
        | &nbsp; Add
      button.btn.btn-warning.form-space.pull-right(ng-click="randomCase()")
        i.fa.fa-random(aria-hidden="true")
        | &nbsp; Random
    pre.pre-scrollable(ng-bind-html="doc | prettify")
  .modal-footer
    button.btn.btn-primary(type="button",ng-click="ok()")
      i.fa.fa-paper-plane-o(aria-hidden="true")
      | &nbsp;Submit
    button.btn.btn-danger(type="button",ng-click="cancel()")
      i.fa.fa-undo(aria-hidden="true")
      | &nbsp;Cancel

script(type='text/ng-template',id='isoScoreModalContent.html')
  .modal-header
    h3
      | Send ISO score
  .modal-body
    form.form-inline
      .form-group
        label.form-space Status
        select.form-control.form-space(required=true,ng-model="newScore.status")
          option(value='-- Select --', selected= true) -- Select --
          option(value='OPEN') OPEN
          option(value='CWOC') CWOC
      .form-group
        label.form-space Score
        select.form-control.form-space(required=true,ng-model="newScore.score")
          option(value='-- Select --', selected= true) -- Select --
          option(value='MISS') MISS
          option(value='HIT') HIT
          option(value='MATCH') MATCH
          option(value='REJECTED') REJECTED
    //- pre.pre-scrollable(ng-bind-html="doc | prettify")
  .modal-footer
    button.btn.btn-primary(type="button",ng-click="ok()")
      i.fa.fa-paper-plane-o(aria-hidden="true")
      | &nbsp;Submit
    button.btn.btn-danger(type="button",ng-click="cancel()")
      i.fa.fa-undo(aria-hidden="true")
      | &nbsp;Cancel
